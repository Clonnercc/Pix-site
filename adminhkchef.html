<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Admin Pix</title>
<style>
body{font-family:system-ui;background:#111;color:#fff;display:grid;place-items:center;height:100vh}
.box{background:#1c1c1c;padding:20px;border-radius:10px;width:320px}
input,button{width:100%;padding:10px;margin-top:10px;border-radius:6px;border:0}
button{background:#2db36c;color:#000;font-weight:700;cursor:pointer}
</style>
</head>
<body>

<div class="box">
  <h2>Admin Pix</h2>

  <input id="senha" placeholder="Senha">
  <input id="titulo" placeholder="Título">
  <input id="subtitulo" placeholder="Subtítulo">
  <input id="valor" placeholder="Valor">
  <textarea id="codigo" placeholder="Código Pix"></textarea>
  <input id="validade" placeholder="Validade">

  <button onclick="salvar()">Salvar</button>
  <p id="msg"></p>
</div>

<script>
const API = 'https://pix-site-api.onrender.com/api/pix';

fetch(API)
  .then(r=>r.json())
  .then(d=>{
    titulo.value=d.titulo;
    subtitulo.value=d.subtitulo;
    valor.value=d.valor;
    codigo.value=d.codigo;
    validade.value=d.validade;
  });

function salvar(){
  fetch(API,{
    method:'POST',
    headers:{'Content-Type':'application/json'},
    body:JSON.stringify({
      senha: senha.value,
      dados:{
        titulo: titulo.value,
        subtitulo: subtitulo.value,
        valor: valor.value,
        codigo: codigo.value,
        validade: validade.value
      }
    })
  })
  .then(r=>r.json())
  .then(d=>{
    msg.innerText = d.ok ? 'Atualizado com sucesso' : 'Erro';
  });
}
</script>

</body>
</html>
